<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- This xml display the Order Line Template menu  -->
    <record id="view_purchase_import_folder_tree" model="ir.ui.view">
        <field name="name">purchase.import.folder.tree</field>
        <field name="model">purchase.import.folder</field>
        <field name="arch" type="xml">
            <tree string="Listes des Dossiers">
                <field name="partner_id"/>
                <field name="reference"/>
                <field name="date_validation"/>
                <field name="bank_id"/>
                <field name="montant"/>
                <field name="devise"/>
                <field name="montant_dz"/>
                <field name="payment_mode"/>
                <field name="delai_payment"/>
                <field name="proformat"/>
                <field name="incoterm"/>
                <field name="date_usine"/>
                <field name="date_embarquement"/>
                <field name="ref_facture"/>
                <field name="state_actuel"/>

            </tree>
        </field>
    </record>

    <record id="view_purchase_import_folder_form" model="ir.ui.view">
        <field name="name">purchase.import.folder.form</field>
        <field name="model">purchase.import.folder</field>
        <field name="arch" type="xml">
            <form string="Order Line Template">
                <header>

                    <button name="action_suivant" string="Suivant"
                            class="btn-primary" type="object"/>
                    <button name="action_precedent" string="Precedent"
                            class="btn-secondary" type="object"/>
                    <field name="etat" widget="statusbar"/>
                </header>
                <sheet>
                    <h1>
                        <label for="reference" string="N. Commande"/>
                        <field name="reference" class="oe_inline" readonly="1"/>
                    </h1>
                    <group>
                        <group>
                            <field name="partner_id"/>
                            <field name="date_validation"/>
                            <field name="payment_mode"/>
                            <field name="proformat"/>
                            <field name="currency_id"/>
                        </group>
                        <group>
                            <field name="date"/>
                            <field name="date_usine"/>
                            <field name="date_embarquement"/>
                            <field name="note"/>
                            <field name="delai_payment"/>
                            <field name="date_payment"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Liste des facture">
                            <field name="invoice_ids" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name="amount_total"/>
                                    <field name="date_invoice"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Info. Expédition">
                            <group>
                                <group>
                                    <field name="port_embarquement"/>
                                    <field name="compagnieie_maritime"/>
                                    <field name="etd"/>
                                    <field name="tracking_doc"/>
                                </group>
                                <group>
                                    <field name="navire"/>
                                    <field name="n_bl"/>
                                    <field name="eta"/>
                                </group>
                            </group>
                        </page>
                        <page string="Détails de Dom. ">
                            <group>
                                <group>
                                    <field name="bank_id"/>
                                    <field name="reference_dossier_banque"/>
                                    <field name="date_ouverture_lc"/>
                                    <field name="montant"/>
                                    <field name="devise"/>
                                    <field name="incoterm"/>
                                    <field name="methode_expedition"/>
                                    <field name="provision_ouverture"/>
                                    <field name="date_limit_embarquement"/>
                                    <field name="date_reception_document"/>
                                </group>
                                <group>
                                    <field name="deblocage_id" />
                                    <field name="montant_debloque_spot_prefin"/>
                                    <field name="montant_droits_douane"/>
                                    <field name="financement_droits_douane" class="oe_inline"/>
                                    <field name="date_deblocage_fin_douane"
                                           invisible="financement_droits_douane != True"/>
                                    <field name="date_echeance_fin_douane"
                                           invisible="financement_droits_douane != True"/>
                                    <field name="reference_deblocage_fin_douane"
                                           invisible="financement_droits_douane != True"/>
                                    <field name="montant_a_rembourser_fin_douane"
                                           invisible="financement_droits_douane != True"/>
                                    <field name="restitution_de_provision" class="oe_inline"/>
                                    <field name="montant_restitue" invisible="restitution_de_provision != True"/>

                                </group>
                            </group>
                            <group string="Document Exigés">
                                <field name="facture_commerciale" class="oe_inline"/>
                                <field name="jeu_complet_connaissement" class="oe_inline"/>
                                <field name="lettre_transport" class="oe_inline"/>
                                <field name="certificat_origine" class="oe_inline"/>
                                <field name="certificat_analyse" class="oe_inline"/>
                                <field name="certificat_sanitaire" class="oe_inline"/>
                                <field name="certificat_confirmite" class="oe_inline"/>
                                <field name="certificat_controle_qualite" class="oe_inline"/>
                                <field name="certificat_non_radioactivite" class="oe_inline"/>
                                <field name="liste_colisage" class="oe_inline"/>
                                <field name="note_poids" class="oe_inline"/>
                                <field name="autre_document_transport" class="oe_inline"/>
                                <field name="autres" class="oe_inline"/>
                            </group>
                        </page>

                        <page string="D10">
                            <field name="d10_ids" widget="one2many_list" nolabel="1">
                                <tree>
                                    <field name="d10_number"/>
                                    <field name="d10_date"/>
                                    <field name="amount_devise"/>

                                </tree>

                                <form string="Purchase Order Line">
                                    <sheet>
                                        <group>
                                            <group string="D10" name="D10">
                                                <field name="d10_number"/>
                                                <field name="d10_date"/>
                                                <field name="amount_devise"/>
                                                <field name="taux_change"/>

                                                <field name="amount_dinars"/>
                                            </group>
                                            <group string="Quitance" name="Quitance">
                                                <field name="quitance_number"/>
                                                <field name="quitance_date"/>
                                                <field name="frais_quitance"/>
                                                <field name="amount_quitance"/>

                                            </group>
                                        </group>
                                        <group string="Tax" name="Tax">
                                            <group>
                                                <field name="taux_douanes"/>
                                                <field name="taux_tcs"/>
                                                <field name="taux_tva"/>
                                                <field name="amount_tva"/>
                                            </group>
                                            <group>
                                                <field name="amount_douane"/>
                                                <field name="amount_tcs"/>
                                            </group>
                                        </group>
                                        <group string="Total" name="Total">
                                            <group>
                                                <field name="debours"/>
                                                <field name="fret"/>
                                                <field name="frais_douanier"/>
                                                <field name="total_product_price" invisible="1"/>
                                                <field name="total_product_poid" invisible="1"/>
                                                <field name="total_frais"/>
                                                <field name="amount_total_d10"/>
                                            </group>
                                        </group>
                                    </sheet>

                                </form>

                            </field>

                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="open_view_purchase_import_folder_tree" model="ir.actions.act_window">
        <field name="name">Dossier</field>
        <field name="res_model">purchase.import.folder</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_purchase_import_folder_tree"/>
    </record>
    <menuitem
            id="menu_purchase_import_root"
            name="Commerce Extérieur"
            sequence="20"
            parent="account_accountant.menu_accounting"
            groups="purchase_import.group_importation,purchase_import.group_importation_user"
    />
    <menuitem
            id="menu_purchase_import"
            name="Importation"
            parent="menu_purchase_import_root"
            action="open_view_purchase_import_folder_tree"
            sequence="20"
            groups="purchase_import.group_importation,purchase_import.group_importation_user"

    />

    <!--    groups="purchase_import.group_importation" -->
    <menuitem
            id="menu_purchase_import_folder"
            name="Dossier"
            groups="purchase_import.group_importation,purchase_import.group_importation_user"
            parent="menu_purchase_import"
            action="open_view_purchase_import_folder_tree"
            sequence="20"/>


</odoo>

